<div>
  <div class="page-header">
    <h1 class="page-title">損益一覧</h1>
  </div>

  <!-- Summary Section -->
  <div class="summary-section" v-if="profitLossData && profitLossData.length > 0">
    <div class="summary-card">
      <h3>損益サマリー</h3>
      <div class="summary-grid">
        <div class="summary-item">
          <span class="summary-label">配当金合計:</span>
          <span class="summary-value positive">{{ fmt(summary.totalIncoming) }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">優待金合計:</span>
          <span class="summary-value positive">{{ fmt(summary.totalBenefit) }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">含み損益合計:</span>
          <span class="summary-value" :class="summary.totalEvaluation >= 0 ? 'positive' : 'negative'">
            {{ fmt(summary.totalEvaluation) }}
          </span>
        </div>
        <div class="summary-item total">
          <span class="summary-label">総損益:</span>
          <span class="summary-value" :class="summary.totalProfitLoss >= 0 ? 'positive' : 'negative'">
            {{ fmt(summary.totalProfitLoss) }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter Section -->
  <div class="filter-section">
    <label>
      オーナー:
      <select v-model="filterOwner" class="filter-select">
        <option value="">すべて</option>
        <option v-for="owner in uniqueOwners" :key="owner" :value="owner">
          {{ owner }}
        </option>
      </select>
    </label>
  </div>

  <!-- Data Table -->
  <table class="common-table profit-loss-table" v-if="filteredItems.length > 0">
    <thead>
      <tr>
        <th>銘柄コード</th>
        <th>銘柄名</th>
        <th>購入日</th>
        <th>購入単価</th>
        <th>現在価格</th>
        <th>保有単元数</th>
        <th>総配当金</th>
        <th>総優待金</th>
        <th>含み損益</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="item in filteredItems" :key="`${item.stockCode}`">
        <td>{{ item.stockCode }}</td>
        <td>{{ item.stockName }}</td>
        <td>{{ item.buyTransactionDate || '-' }}</td>
        <td class="price-cell">{{ fmt(item.purchasePrice) }}</td>
        <td class="price-cell">{{ item.currentPrice ? fmt(item.currentPrice) : '-' }}</td>
        <td class="text-center">{{ item.currentUnit || 0 }}</td>
        <td class="price-cell positive">{{ fmt(item.totalIncoming || 0) }}</td>
        <td class="price-cell positive">{{ fmt(item.totalBenefit || 0) }}</td>
        <td class="price-cell" :class="calculateEvaluation(item) >= 0 ? 'positive' : 'negative'">
          {{ fmt(calculateEvaluation(item)) }}
        </td>
      </tr>
    </tbody>
  </table>
  <div v-else>
    <p>データはありません</p>
  </div>
</div>
