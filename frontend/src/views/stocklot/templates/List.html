<div>
  <div class="page-header">
    <h1 class="page-title">ストックロット一覧</h1>
    <div class="header-actions">
      <select v-model="selectedOwner" class="owner-filter">
        <option value="">すべてのオーナー</option>
        <option v-for="owner in owners" :key="owner.id" :value="owner.id">
          {{ owner.name }}
        </option>
      </select>
      <button @click="goToAddStock" class="btn btn-primary">新規登録</button>
    </div>
  </div>
  <!-- ページヘッダー -->
  <table v-if="stockLots.length > 0" class="common-table">
    <thead>
      <tr>
        <th>銘柄コード</th>
        <th>オーナー</th>
        <th>銘柄名</th>
        <th>購入日</th>
        <th>単元数</th>
        <th>購入価格</th>
        <th>現在価格</th>
        <th>評価損益</th>
        <th>配当金</th>
        <th>購入株価配当利回り</th>
        <th>現在株価配当利回り</th>
        <th>アクション</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="lot in stockLots" :key="lot.id">
        <td>{{ lot.stock.code }}</td>
        <td>{{ lot.owner.name }}</td>
        <td>{{ lot.stock.name }}</td>
        <td>{{ lot.purchaseDate }}</td>
        <td>{{ lot.currentUnit }}</td>
        <td>{{ fmt(lot.averagePrice ?? lot.price) }}</td>
        <td>{{ fmt(lot.stock && lot.stock.currentPrice) }}</td>
        <td :class="{'positive': evaluation(lot) > 0, 'negative': evaluation(lot) < 0}">
          {{ fmt(evaluation(lot)) }}
        </td>
        <td>{{ lot.incoming }}</td>
        <td>{{ purchasePriceDividendYield(lot) }}%</td>
        <td>{{ currentPriceDividendYield(lot) }}%</td>
        <td>
          <button @click="goToSellPage(lot.id)" class="btn btn-success">売却</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div v-else>
    <p>データはありません</p>
  </div>
</div>